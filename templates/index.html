<!DOCTYPE html>
<html>
<head>
    <title>Minimum Spanning Tree Algorithm</title>
    <style>
        canvas {
            border: 1px solid #000;
        }
        #createDot,
        #deleteDots {
            display: block;
            margin-top: 10px;
        }
        .active {
            background-color: red;
            color: #fff;
        }
    </style>
</head>
<body>
    <h1>Minimum Spanning Tree Algorithm</h1>
    <canvas id="canvas" width="500" height="500"></canvas>
    <button id="createDot">Create Dot</button>
    <button id="deleteDots">Delete</button>

    <script>
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');
        var dots = [];
        var dotCount = 1;
        var deleteMode = false;
        var selectedDot = null;
        var offsetX = 0;
        var offsetY = 0;

        function Dot(x, y, size, num) {
            this.x = x;
            this.y = y;
            this.size = size;
            this.num = num;
            this.highlighted = false;

            this.draw = function() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, 2 * Math.PI, false);
                ctx.fillStyle = this.highlighted ? 'red' : 'green';
                ctx.fill();
                ctx.lineWidth = 1;
                ctx.strokeStyle = '#000';
                ctx.stroke();

                ctx.font = '14px Arial';
                ctx.fillStyle = '#fff';
                ctx.fillText(this.num, this.x - 5, this.y + 5);
            }

            this.isInside = function(x, y) {
                var dx = this.x - x;
                var dy = this.y - y;
                return Math.sqrt(dx * dx + dy * dy) <= this.size;
            }
        }

        function createDot() {
            var centerX = canvas.width / 2;
            var centerY = canvas.height / 2;
            var size = 20;
            var num = getNextNumber();

            var dot = new Dot(centerX, centerY, size, num);
            dots.push(dot);
            dot.draw();
        }

        function getNextNumber() {
            var numbers = dots.map(function(dot) {
                return dot.num;
            });

            var nextNumber = 1;
            while (numbers.includes(nextNumber)) {
                nextNumber++;
            }

            return nextNumber;
        }

        function handleMouseDown(event) {
            var rect = canvas.getBoundingClientRect();
            var x = event.clientX - rect.left;
            var y = event.clientY - rect.top;

            if (deleteMode) {
                for (var i = dots.length - 1; i >= 0; i--) {
                    if (dots[i].isInside(x, y)) {
                        dots.splice(i, 1);
                        redrawCanvas();
                        break;
                    }
                }
            } else {
                for (var i = dots.length - 1; i >= 0; i--) {
                    if (dots[i].isInside(x, y)) {
                        selectedDot = dots[i];
                        offsetX = x - selectedDot.x;
                        offsetY = y - selectedDot.y;
                        canvas.addEventListener('mousemove', handleMouseMove);
                        canvas.addEventListener('mouseup', handleMouseUp);
                        break;
                    }
                }
            }
        }

        function handleMouseMove(event) {
            var rect = canvas.getBoundingClientRect();
            var x = event.clientX - rect.left;
            var y = event.clientY - rect.top;
            selectedDot.x = x - offsetX;
            selectedDot.y = y - offsetY;
            redrawCanvas();
        }

        function handleMouseUp() {
            selectedDot = null;
            canvas.removeEventListener('mousemove', handleMouseMove);
            canvas.removeEventListener('mouseup', handleMouseUp);
        }

        function handleCanvasClick(event) {
            if (deleteMode) return;

            var rect = canvas.getBoundingClientRect();
            var x = event.clientX - rect.left;
            var y = event.clientY - rect.top;

            for (var i = dots.length - 1; i >= 0; i--) {
                if (dots[i].isInside(x, y)) {
                    selectedDot = dots[i];
                    offsetX = x - selectedDot.x;
                    offsetY = y - selectedDot.y;
                    break;
                }
            }
        }

        function toggleDeleteMode() {
            deleteMode = !deleteMode;
            var deleteButton = document.getElementById('deleteDots');
            deleteButton.textContent = deleteMode ? 'Done' : 'Delete';
            deleteButton.classList.toggle('active');
            canvas.removeEventListener('mousemove', handleMouseMove);
            canvas.removeEventListener('mouseup', handleMouseUp);
            clearHighlights();
        }

        function clearHighlights() {
            dots.forEach(function(dot) {
                dot.highlighted = false;
            });
            redrawCanvas();
        }

        function redrawCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            dots.forEach(function(dot) {
                dot.draw();
            });
        }

        document.getElementById('createDot').addEventListener('click', createDot);
        document.getElementById('deleteDots').addEventListener('click', toggleDeleteMode);
        canvas.addEventListener('mousedown', handleMouseDown);
        canvas.addEventListener('click', handleCanvasClick);
    </script>
</body>
</html>
